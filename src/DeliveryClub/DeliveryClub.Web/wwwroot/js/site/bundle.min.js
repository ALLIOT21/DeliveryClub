"use strict";function setEditModeIndex(){const n=document.getElementsByClassName("to-edit");toggleVisibilityClassesInListIndex(n);const t=document.getElementsByClassName("checkbox-disabled");setDisabledAttributeToList(t,!1);saveCheckboxValues(getSpecializationList());saveCheckboxValues(getPaymentList());fillEditFields()}function setSaveModeIndex(){const n=document.getElementsByClassName("to-edit");toggleVisibilityClassesInListIndex(n);const t=document.getElementsByClassName("checkbox-disabled");setDisabledAttributeToList(t,!0);setCheckboxValues(getSpecializationList());setCheckboxValues(getPaymentList())}function toggleVisibilityClassesInListIndex(n){const i=n.length;for(let r=0;r<i;r++){var t=n.item(r);t.classList.toggle("is-visible");t.classList.toggle("inline");t.classList.toggle("non-visible")}}function setDisabledAttributeToList(n,t){for(let r=0;r<n.length;r++){var i=n.item(r);i.disabled=t}}function saveCheckboxValues(n){for(let t=0;t<n.length;t++){let i=n.item(t);i.checked?sessionStorage.setItem(i.id,"checked"):sessionStorage.setItem(i.id,"unchecked")}}function setCheckboxValues(n){for(let i=0;i<n.length;i++){let r=n.item(i);var t=sessionStorage.getItem(r.id);r.checked=t=="checked"?!0:!1}}function getSpecializationList(){return document.getElementsByClassName("specialization")}function getPaymentList(){return document.getElementsByClassName("payment")}function fillEditFields(){document.getElementById("edit-name").value=document.getElementById("display-name").innerHTML;document.getElementById("edit-deliverycost").value=document.getElementById("display-deliverycost").innerHTML;document.getElementById("edit-minorderprice").value=document.getElementById("display-minorderprice").innerHTML;document.getElementById("edit-description").value=document.getElementById("display-description").innerHTML;document.getElementById("edit-deliverymaxtime").value=document.getElementById("display-deliverymaxtime").innerHTML;document.getElementById("edit-ordertimebegin").value=document.getElementById("display-ordertimebegin").innerHTML;document.getElementById("edit-ordertimeend").value=document.getElementById("display-ordertimeend").innerHTML}function createMenuGroupFormDiv(){var f=getActiveDivCreateProductGroup(),n=createFormCreateProductGroup();hideButtonCreateMenuGroup();var t=createDivWithClass("div-name"),r=createDivWithClass("div-name-label"),u=createDivWithClass("div-name-input"),i=createDivWithClass("div-button-create"),e=createLabelInputName(),o=createInputName(),s=createPortionPriceButtonsDiv(createPortionPricePair_Create,deletePortionPricePair_Create),h=createButtonCreate(),c=createButtonDecline();r.appendChild(e);u.appendChild(o);t.appendChild(r);t.appendChild(u);i.appendChild(h);i.appendChild(c);n.appendChild(t);n.appendChild(s);n.appendChild(i);f.appendChild(n)}function createPortionPriceDiv(n,t="",i=0,r=-1){var e=createDivWithClass("div-portion-price"),o=createDivWithClass("div-portion"),c=createDivWithClass("div-portion-price-label"),l=createDivWithClass("div-portion-price-input"),s=createDivWithClass("div-price"),a=createDivWithClass("div-portion-price-label"),v=createDivWithClass("div-portion-price-input"),y=document.createElement("label"),f=document.createElement("input"),p=document.createElement("label"),u=document.createElement("input");let h;return h=r==-1?n.getElementsByClassName("div-portion-price").length:r,f.name=`PortionPrices[${h}].Portion`,u.name=`PortionPrices[${h}].Price`,f.classList.toggle("form-control"),u.classList.toggle("form-control"),u.type="number",y.innerHTML="Portion: ",p.innerHTML="Price: ",f.value=t,u.value=i,u.step="any",c.appendChild(y),l.appendChild(f),a.appendChild(p),v.appendChild(u),o.appendChild(c),o.appendChild(l),s.appendChild(a),s.appendChild(v),e.appendChild(o),e.appendChild(s),e}function deletePortionPriceDiv(n){var r=n.getElementsByClassName("div-portion-price"),i=r.length,u,t;i!=0&&(r[i-1].remove(),u=`[name="PortionPrices[${i-1}].Id"]`,t=n.querySelector(u),console.log(t),t!=null&&t.remove())}function submitForm(){document.getElementById("form-create-product-group").submit()}function createFormCreateProductGroup(){var n=document.createElement("form");return n.setAttribute("method","post"),n.action="/Admin/CreateProductGroup",n.id="form-create-product-group",n}function createButtonCreatePortionPrice(){var n=document.createElement("button");return n.classList.add("btn"),n.classList.add("btn-secondary"),n.classList.add("button-portion_price"),n.classList.add("button-portion_price-create"),n.innerHTML="Create a portion-price pair",n.setAttribute("form",""),n}function createButtonDeletePortionPrice(){var n=document.createElement("button");return n.classList.add("btn"),n.classList.add("btn-secondary"),n.classList.add("button-portion_price"),n.classList.add("button-potrion_price-delete"),n.innerHTML="Delete a portion-price pair",n.setAttribute("form",""),n}function createButtonCreate(){var n=document.createElement("button");return n.classList.add("btn"),n.classList.add("btn-primary"),n.classList.add("button-form"),n.innerHTML="Create",n.onclick=submitForm,n}function createButtonDecline(){var n=document.createElement("button");return n.classList.add("btn"),n.classList.add("btn-danger"),n.classList.add("button-form"),n.innerHTML="Decline",n.onclick=declineCreateProductGroupForm,n}function createDivWithClass(n){var t=document.createElement("div");return t.classList.toggle(n),t}function createLabelInputName(){var n=document.createElement("label");return n.setAttribute("for","input-name"),n.innerHTML="Name: ",n}function createInputName(){var n=document.createElement("input");return n.id="input-name",n.name="Name",n.classList.toggle("form-control"),n}function createPortionPriceButtonsDiv(n,t){var i=createDivWithClass("div-buttons-portion_price"),r,u;return i.id="div-buttons-portion_price",r=createButtonCreatePortionPrice(),u=createButtonDeletePortionPrice(),setPortionPriceButtonsDivFuncs(r,u,n,t),i.appendChild(r),i.appendChild(u),i}function setPortionPriceButtonsDivFuncs(n,t,i,r){n.onclick=i;t.onclick=r}function declineCreateProductGroupForm(){var i=document.getElementById("form-create-product-group"),n,t;i.remove();n=document.getElementById("div-create-product-group");n.classList.toggle("menu-content-create_group_active");t=document.getElementById("btn-create-menu-group");t.classList.toggle("display-none")}function insertPortionPriceDivBeforeDiv(n,t,i){t.insertBefore(n,i)}function appendPortionPriceDiv(n,t){t.appendChild(n)}function getActiveDivCreateProductGroup(){var n=document.getElementById("div-create-product-group");return n.classList.toggle("menu-content-create_group_active"),n}function hideButtonCreateMenuGroup(){var n=document.getElementById("btn-create-menu-group");n.classList.toggle("display-none")}function createPortionPricePair_Create(){insertPortionPriceDivBeforeDiv(createPortionPriceDiv(document.getElementById("form-create-product-group")),document.getElementById("form-create-product-group"),document.getElementById("div-buttons-portion_price"))}function deletePortionPricePair_Create(){deletePortionPriceDiv(document.getElementById("form-create-product-group"))}function setEditModeMenu(){var n=findDivByElement("product-group-title"),t,i;const r=n.getElementsByClassName("to-edit");toggleVisibilityClassesInListMenu(r);fillEditFieldsMenu(n);t=n.getElementsByClassName("product-group-title-info-portion_prices")[0];i=createPortionPriceButtonsDiv(createPortionPricePair_Edit,deletePortionPricePair_Edit);t.appendChild(i)}function setSaveModeMenu(){var t=findDivByElement("product-group-title"),n;const i=t.getElementsByClassName("to-edit");toggleVisibilityClassesInListMenu(i);n=getPortionPricesDiv_Edit();deletePortionPriceDivs(n);deletePortionPriceButtonsDiv(n)}function findDivByElement(n){for(var t=event.target;!t.classList.contains(n);)t=t.parentNode;return t}function toggleVisibilityClassesInListMenu(n){const i=n.length;for(let r=0;r<i;r++){var t=n.item(r);t.classList.toggle("is-visible");t.classList.toggle("non-visible")}}function fillEditFieldsMenu(n){var i=n.getElementsByClassName("product-group-title-info-name"),u=i[0].getElementsByTagName("input"),f=i[0].getElementsByTagName("h2"),r,t;u[0].value=f[0].innerHTML;r=n.getElementsByClassName("product-group-title-info-portion_prices")[0];t=SetPortionPricesToEdit();for(let n=0;n<t.length;n++)insertPortionPriceDivBeforeDiv(t[n],r,getPortionPriceButtonsDiv(getPortionPricesDiv_Edit()))}function createPortionPricePair_Edit(){insertPortionPriceDivBeforeDiv(createPortionPriceDiv(findDivByElement("product-group-title")),getPortionPricesDiv_Edit(),getPortionPriceButtonsDiv(getPortionPricesDiv_Edit()))}function deletePortionPricePair_Edit(){var n=getPortionPricesDiv_Edit();deletePortionPriceDiv(n)}function deletePortionPriceButtonsDiv(n){getPortionPriceButtonsDiv(n).remove()}function getPortionPriceButtonsDiv(n){var t=n.getElementsByClassName("div-buttons-portion_price");return t[0]}function getPortionPricesDiv_Edit(){var n=findDivByElement("product-group-title"),t=n.getElementsByClassName("product-group-title-info-portion_prices");return t[0]}function SetPortionPricesToEdit(){var t=getPortionPricesDiv_Edit(),n=t.getElementsByClassName("product-group-title-info-portion_price"),i=[];for(let e=0;e<n.length;e++){var r=n[e].getElementsByClassName("span-edit-product_group-portion")[0],u=n[e].getElementsByClassName("span-edit-product_group-price")[0],f=createPortionPriceDiv(t,r.innerHTML,u.innerHTML,e);i.push(f)}return i}function deletePortionPriceDivs(n){var t=n.getElementsByClassName("div-portion-price");let i=t.length;for(let n=0;n<i;n++)t[0].remove()}function ChangeTabs(){var i=document.getElementById("pills-info-tab"),r=document.getElementById("pills-menu-tab"),n=document.getElementById("pills-info"),t=document.getElementById("pills-menu");i.classList.toggle("active");r.classList.toggle("active");n.classList.toggle("show");n.classList.toggle("active");t.classList.toggle("show");t.classList.toggle("active")}function addPortionPriceDiv(n,t="",i=0){var r=getPortionPricesDiv_Product(),u;u=t!=""&&i!=0?createPortionPriceDiv(r,t,i):createPortionPriceDiv(r);insertPortionPriceDivBeforeDiv(u,r,n)}function addPortionPriceButtonsDiv(n){var t=getPortionPricesDiv_Product();return t.appendChild(n),n}function getPortionPricesDiv_Product(){return document.getElementsByClassName("portion-prices")[0]}function addPortionPrices(){var n=createPortionPriceButtonsDiv(createPortionPricePair_Product,deletePortionPricePair_Product);addPortionPriceButtonsDiv(n);addPortionPriceDiv(n)}function deletePortionPrices(){for(var n=getPortionPricesDiv_Product();n.firstChild;)n.removeChild(n.firstChild)}function createPortionPricePair_Product(){var n=getPortionPricesDiv_Product();insertPortionPriceDivBeforeDiv(createPortionPriceDiv(n),n,getPortionPriceButtonsDiv(n))}function deletePortionPricePair_Product(){deletePortionPriceDiv(getPortionPricesDiv_Product())}function switchPrice(){var t=event.target.id,i=$(`#${t} option:selected`).attr("id"),r=i.replace("portion","price"),u=findDivByElement("product"),n=u.getElementsByClassName("price");console.log(n);for(let t=0;t<n.length;t++)n[t].classList.contains("is-visible")&&(n[t].classList.toggle("non-visible"),n[t].classList.toggle("is-visible")),n[t].id==r&&(n[t].classList.toggle("non-visible"),n[t].classList.toggle("is-visible"))}function HasPortionPrices(n){let t;return jQuery.ajax({url:`/api/productgroups/${n.value}/portionpriced`,type:"GET",dataType:"json",success:function(n){n?deletePortionPrices():(deletePortionPrices(),addPortionPrices())}}),t}function getProductGroupName(){return document.getElementById("product-group")}function onChangeImgInput(){getFileName(event.target);changeImage(event.target)}function getFileName(n){let t=$(n).val().split("\\").pop();return $(n).next(".custom-file-label").html(t),$(n).val()}function changeImage(n){if(n.files&&n.files[0]){var t=new FileReader;t.onload=function(n){$("#product_image-img").attr("src",n.target.result).width(200).height(200)};t.readAsDataURL(n.files[0])}}