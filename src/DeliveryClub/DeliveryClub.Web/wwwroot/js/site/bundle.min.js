"use strict";function setEditModeIndex(){const n=document.getElementsByClassName("to-edit");toggleVisibilityClassesInListIndex(n);const t=document.getElementsByClassName("checkbox-disabled");setDisabledAttributeToList(t,!1);enableImageInput();saveImageSrc();saveCheckboxValues(getSpecializationList());saveCheckboxValues(getPaymentList());fillEditFields()}function setSaveModeIndex(){const n=document.getElementsByClassName("to-edit");toggleVisibilityClassesInListIndex(n);const t=document.getElementsByClassName("checkbox-disabled");setDisabledAttributeToList(t,!0);disableImageInput();returnImageSrc();setCheckboxValues(getSpecializationList());setCheckboxValues(getPaymentList())}function toggleVisibilityClassesInListIndex(n){const i=n.length;for(let r=0;r<i;r++){var t=n.item(r);t.classList.toggle("is-visible");t.classList.toggle("inline");t.classList.toggle("non-visible")}}function setDisabledAttributeToList(n,t){for(let r=0;r<n.length;r++){var i=n.item(r);i.disabled=t}}function saveCheckboxValues(n){for(let t=0;t<n.length;t++){let i=n.item(t);i.checked?sessionStorage.setItem(i.id,"checked"):sessionStorage.setItem(i.id,"unchecked")}}function setCheckboxValues(n){for(let i=0;i<n.length;i++){let r=n.item(i);var t=sessionStorage.getItem(r.id);r.checked=t=="checked"?!0:!1}}function saveImageSrc(){sessionStorage.setItem("image",document.getElementById("image").getAttribute("src"))}function returnImageSrc(){document.getElementById("image").setAttribute("src",sessionStorage.getItem("image"))}function enableImageInput(){document.getElementById("image-input").removeAttribute("disabled")}function disableImageInput(){document.getElementById("image-input").removeAttribute("src");document.getElementById("image-label").innerHTML="";document.getElementById("image-input").setAttribute("disabled","disabled")}function getSpecializationList(){return document.getElementsByClassName("specialization")}function getPaymentList(){return document.getElementsByClassName("payment")}function fillEditFields(){document.getElementById("edit-name").value=document.getElementById("display-name").innerHTML;document.getElementById("edit-deliverycost").value=document.getElementById("display-deliverycost").innerHTML;document.getElementById("edit-minorderprice").value=document.getElementById("display-minorderprice").innerHTML;document.getElementById("edit-description").value=document.getElementById("display-description").innerHTML;document.getElementById("edit-deliverymaxtime").value=document.getElementById("display-deliverymaxtime").innerHTML;document.getElementById("edit-ordertimebegin").value=document.getElementById("display-ordertimebegin").innerHTML;document.getElementById("edit-ordertimeend").value=document.getElementById("display-ordertimeend").innerHTML}function createMenuGroupFormDiv(){var f=getActiveDivCreateProductGroup(),n=createFormCreateProductGroup();hideButtonCreateMenuGroup();var t=createDivWithClass("div-name"),r=createDivWithClass("div-name-label"),u=createDivWithClass("div-name-input"),i=createDivWithClass("div-button-create"),e=createLabelInputName(),o=createInputName(),s=createPortionPriceButtonsDiv(createPortionPricePair_Create,deletePortionPricePair_Create),h=createButtonCreate(),c=createButtonDecline();r.appendChild(e);u.appendChild(o);t.appendChild(r);t.appendChild(u);i.appendChild(h);i.appendChild(c);n.appendChild(t);n.appendChild(s);n.appendChild(i);f.appendChild(n)}function createPortionPriceDiv(n,t="",i=0,r=-1){var e=createDivWithClass("div-portion-price"),o=createDivWithClass("div-portion"),c=createDivWithClass("div-portion-price-label"),l=createDivWithClass("div-portion-price-input"),s=createDivWithClass("div-price"),a=createDivWithClass("div-portion-price-label"),v=createDivWithClass("div-portion-price-input"),y=document.createElement("label"),f=document.createElement("input"),p=document.createElement("label"),u=document.createElement("input");let h;return h=r==-1?n.getElementsByClassName("div-portion-price").length:r,f.name=`PortionPrices[${h}].Portion`,u.name=`PortionPrices[${h}].Price`,f.classList.toggle("form-control"),u.classList.toggle("form-control"),u.type="number",y.innerHTML="Portion: ",p.innerHTML="Price: ",f.value=t,u.value=i,u.step="any",c.appendChild(y),l.appendChild(f),a.appendChild(p),v.appendChild(u),o.appendChild(c),o.appendChild(l),s.appendChild(a),s.appendChild(v),e.appendChild(o),e.appendChild(s),e}function deletePortionPriceDiv(n){var r=n.getElementsByClassName("div-portion-price"),i=r.length,u,t;i!=0&&(r[i-1].remove(),u=`[name="PortionPrices[${i-1}].Id"]`,t=n.querySelector(u),console.log(t),t!=null&&t.remove())}function submitForm(){document.getElementById("form-create-product-group").submit()}function createFormCreateProductGroup(){var n=document.createElement("form");return n.setAttribute("method","post"),n.action="/Admin/CreateProductGroup",n.id="form-create-product-group",n}function createButtonCreatePortionPrice(){var n=document.createElement("button");return n.classList.add("btn"),n.classList.add("btn-secondary"),n.classList.add("button-portion_price"),n.classList.add("button-portion_price-create"),n.innerHTML="Create a portion-price pair",n.setAttribute("form",""),n}function createButtonDeletePortionPrice(){var n=document.createElement("button");return n.classList.add("btn"),n.classList.add("btn-secondary"),n.classList.add("button-portion_price"),n.classList.add("button-potrion_price-delete"),n.innerHTML="Delete a portion-price pair",n.setAttribute("form",""),n}function createButtonCreate(){var n=document.createElement("button");return n.classList.add("btn"),n.classList.add("btn-primary"),n.classList.add("button-form"),n.innerHTML="Create",n.onclick=submitForm,n}function createButtonDecline(){var n=document.createElement("button");return n.classList.add("btn"),n.classList.add("btn-danger"),n.classList.add("button-form"),n.innerHTML="Decline",n.onclick=declineCreateProductGroupForm,n}function createDivWithClass(n){var t=document.createElement("div");return t.classList.toggle(n),t}function createLabelInputName(){var n=document.createElement("label");return n.setAttribute("for","input-name"),n.innerHTML="Name: ",n}function createInputName(){var n=document.createElement("input");return n.id="input-name",n.name="Name",n.classList.toggle("form-control"),n}function createPortionPriceButtonsDiv(n,t){var i=createDivWithClass("div-buttons-portion_price"),r,u;return i.id="div-buttons-portion_price",r=createButtonCreatePortionPrice(),u=createButtonDeletePortionPrice(),setPortionPriceButtonsDivFuncs(r,u,n,t),i.appendChild(r),i.appendChild(u),i}function setPortionPriceButtonsDivFuncs(n,t,i,r){n.onclick=i;t.onclick=r}function declineCreateProductGroupForm(){var i=document.getElementById("form-create-product-group"),n,t;i.remove();n=document.getElementById("div-create-product-group");n.classList.toggle("menu-content-create_group_active");t=document.getElementById("btn-create-menu-group");t.classList.toggle("display-none")}function insertPortionPriceDivBeforeDiv(n,t,i){t.insertBefore(n,i)}function appendPortionPriceDiv(n,t){t.appendChild(n)}function getActiveDivCreateProductGroup(){var n=document.getElementById("div-create-product-group");return n.classList.toggle("menu-content-create_group_active"),n}function hideButtonCreateMenuGroup(){var n=document.getElementById("btn-create-menu-group");n.classList.toggle("display-none")}function createPortionPricePair_Create(){insertPortionPriceDivBeforeDiv(createPortionPriceDiv(document.getElementById("form-create-product-group")),document.getElementById("form-create-product-group"),document.getElementById("div-buttons-portion_price"))}function deletePortionPricePair_Create(){deletePortionPriceDiv(document.getElementById("form-create-product-group"))}function setEditModeMenu(){var n=findDivByElement("product-group-title"),t,i;const r=n.getElementsByClassName("to-edit");toggleVisibilityClassesInListMenu(r);fillEditFieldsMenu(n);t=n.getElementsByClassName("product-group-title-info-portion_prices")[0];i=createPortionPriceButtonsDiv(createPortionPricePair_Edit,deletePortionPricePair_Edit);t.appendChild(i)}function setSaveModeMenu(){var t=findDivByElement("product-group-title"),n;const i=t.getElementsByClassName("to-edit");toggleVisibilityClassesInListMenu(i);n=getPortionPricesDiv_Edit();deletePortionPriceDivs(n);deletePortionPriceButtonsDiv(n)}function findDivByElement(n){for(var t=event.target;!t.classList.contains(n);)t=t.parentNode;return t}function toggleVisibilityClassesInListMenu(n){const i=n.length;for(let r=0;r<i;r++){var t=n.item(r);t.classList.toggle("is-visible");t.classList.toggle("non-visible")}}function fillEditFieldsMenu(n){var i=n.getElementsByClassName("product-group-title-info-name"),u=i[0].getElementsByTagName("input"),f=i[0].getElementsByTagName("h2"),r,t;u[0].value=f[0].innerHTML;r=n.getElementsByClassName("product-group-title-info-portion_prices")[0];t=SetPortionPricesToEdit();for(let n=0;n<t.length;n++)insertPortionPriceDivBeforeDiv(t[n],r,getPortionPriceButtonsDiv(getPortionPricesDiv_Edit()))}function createPortionPricePair_Edit(){insertPortionPriceDivBeforeDiv(createPortionPriceDiv(findDivByElement("product-group-title")),getPortionPricesDiv_Edit(),getPortionPriceButtonsDiv(getPortionPricesDiv_Edit()))}function deletePortionPricePair_Edit(){var n=getPortionPricesDiv_Edit();deletePortionPriceDiv(n)}function deletePortionPriceButtonsDiv(n){getPortionPriceButtonsDiv(n).remove()}function getPortionPriceButtonsDiv(n){var t=n.getElementsByClassName("div-buttons-portion_price");return t[0]}function getPortionPricesDiv_Edit(){var n=findDivByElement("product-group-title"),t=n.getElementsByClassName("product-group-title-info-portion_prices");return t[0]}function SetPortionPricesToEdit(){var t=getPortionPricesDiv_Edit(),n=t.getElementsByClassName("product-group-title-info-portion_price"),i=[];for(let e=0;e<n.length;e++){var r=n[e].getElementsByClassName("span-edit-product_group-portion")[0],u=n[e].getElementsByClassName("span-edit-product_group-price")[0],f=createPortionPriceDiv(t,r.innerHTML,u.innerHTML,e);i.push(f)}return i}function deletePortionPriceDivs(n){var t=n.getElementsByClassName("div-portion-price");let i=t.length;for(let n=0;n<i;n++)t[0].remove()}function ChangeTabs1(){var i=document.getElementById("pills-info-tab"),r=document.getElementById("pills-menu-tab"),n=document.getElementById("pills-info"),t=document.getElementById("pills-menu");i.classList.toggle("active");r.classList.toggle("active");n.classList.toggle("show");n.classList.toggle("active");t.classList.toggle("show");t.classList.toggle("active")}function addPortionPriceDiv(n,t,i){insertPortionPriceDivBeforeDiv(n,t,i)}function addPortionPriceButtonsDiv(n,t){return n.appendChild(t),t}function addPortionPrices(){var n=createDivWithClass("portion-prices"),t,i,r;n.classList.toggle("form-group");t=createPortionPriceButtonsDiv(createPortionPricePair_Product,deletePortionPricePair_Product);addPortionPriceButtonsDiv(n,t);i=createPortionPriceDiv(n);addPortionPriceDiv(i,n,t);r=document.getElementById("form-product");r.insertBefore(n,document.getElementsByClassName("product-uploading-image")[0]);SetPortionPricedProductGroupProperty("false")}function deletePortionPrices(){var n=getPortionPricesDiv();n!=null&&n.remove()}function getPortionPricesDiv(){return document.getElementsByClassName("portion-prices")[0]}function hidePortionPrices(){var n=getPortionPricesDiv();n.classList.contains("non-visible")||n.classList.add("non-visible");SetPortionPricedProductGroupProperty("true")}function showPortionPrices(){var n=getPortionPricesDiv();n.classList.contains("non-visible")&&n.classList.remove("non-visible");SetPortionPricedProductGroupProperty("false")}function documentHasPortionPrices(){var n=getPortionPricesDiv();return n?!0:!1}function createPortionPricePair_Product(){var n=getPortionPricesDiv();insertPortionPriceDivBeforeDiv(createPortionPriceDiv(n),n,getPortionPriceButtonsDiv(n))}function deletePortionPricePair_Product(){deletePortionPriceDiv(getPortionPricesDiv())}function SetPortionPricedProductGroupProperty(n){document.querySelector(`[name="ProductGroupPortionPriced"]`)&&document.querySelector(`[name="ProductGroupPortionPriced"]`).setAttribute("value",n)}function switchPrice(){var t=event.target.id,i=$(`#${t} option:selected`).attr("id"),r=i.replace("portion","price"),u=findDivByElement("product-portion-price"),n=u.getElementsByClassName("price");for(let t=0;t<n.length;t++)n[t].classList.contains("is-visible")&&(n[t].classList.toggle("non-visible"),n[t].classList.toggle("is-visible")),n[t].id==r&&(n[t].classList.toggle("non-visible"),n[t].classList.toggle("is-visible"))}function HasPortionPrices(n){let t;return jQuery.ajax({url:`/api/productgroups/${n.value}/portionpriced`,type:"GET",dataType:"json",success:function(n){n?hidePortionPrices():documentHasPortionPrices()?showPortionPrices():addPortionPrices()}}),t}function getProductGroupName(){return document.getElementById("product-group")}function onChangeImgInput(){isFileBig(event.target)?(hideFileSizeError(),getFileName(event.target),changeImage(event.target)):showFileSizeError()}function getFileName(n){let t=$(n).val().split("\\").pop();return $(n).next(".custom-file-label").html(t),$(n).val()}function changeImage(n){if(n.files&&n.files[0]){var t=new FileReader;t.onload=function(n){$("#image").attr("src",n.target.result)};t.readAsDataURL(n.files[0])}}function isFileBig(n){return n.files[0].size<2097152?!0:!1}function hideFileSizeError(){var n=document.getElementById("file-size-error");n.classList.contains("non-visible")||n.classList.add("non-visible")}function showFileSizeError(){var n=document.getElementById("file-size-error");n.classList.contains("non-visible")&&n.classList.remove("non-visible")}function showNotification(n,t){switch(n){case"Success":iziToast.success({title:t,position:"topRight"});break;case"Error":iziToast.error({title:t,position:"topRight"});break;case"Warning":iziToast.warning({title:t,position:"topRight"})}}function toggleGrayBackground(){event.target.classList.toggle("gray-background")}function toggleGrayBackgroundParent(){event.target.classList.toggle("gray-background");event.target.parentNode.classList.toggle("gray-background")}function Cart(){this.orders=[]}function addProductToCart(){let t=getCart();t==null&&(t=createCart());t=t!="empty"?JSON.parse(getCart()):null;let n=null,i;if(t!=null)if(t.orders!=null){var r=getOrder(t.orders,getRestaurantId());r!=null?(i=r.orderIndex,n=r.order):n=createOrder(null,null)}else n=createOrder(null,null);else t=new Cart,n=createOrder(null,null);if(n.restaurant==null)n.restaurant=createRestaurant(),addProductToOrderProducts(createProduct(),n.products),t.orders.push(n),addOrderView(n);else{let t=createProduct();addingProductIsInCart(t,n.products,i)||(addProductToOrderProducts(t,n.products),addProductView(t,i))}setCart(t)}function createCart(){localStorage.setItem("delivery-club-cart","empty")}function deleteCart(){localStorage.setItem("delivery-club-cart","empty");for(var n=getCartMain();n.firstChild;)n.removeChild(n.firstChild)}function getCart(){return localStorage.getItem("delivery-club-cart")}function setCart(n){localStorage.setItem("delivery-club-cart",JSON.stringify(n))}function addingProductIsInCart(n,t,i){for(let r=0;r<t.length;r++)if(n.id==t[r].id&&n.portion==t[r].portion)return t[r].amount++,incrementProductView(t[r],r,i),!0;return!1}function fillCart(){let n=getCart();if(n!=null){n=JSON.parse(n);for(let t=0;t<n.orders.length;t++)addOrderView(n.orders[t])}}function menuIsActive(){let i=document.getElementById("span_order-time-begin").innerHTML,r=document.getElementById("span_order-time-end").innerHTML,u=document.getElementsByClassName("btn btn-outline-danger"),n=new Date,f=n.getHours(),e=n.getMinutes(),t=createTimeString(f,e);t>i&&t<r||(setButtonsDisabled(u),swal("Closed","The restaurant is closed now :(","error"))}function createTimeString(n,t){return createDoubleDigitTimeValue(n)+":"+createDoubleDigitTimeValue(t)}function setButtonsDisabled(n){console.log(n);for(let t=0;t<n.length;t++)n[t].setAttribute("disabled","disabled")}function createDoubleDigitTimeValue(n){return n<10?"0"+n:n.toString()}function Order(n,t){this.restaurant=n;this.products=t!=null?[t]:[]}function getOrder(n,t){console.log(n);for(let r=0;r<n.length;r++)if(console.log(n[r]),n[r].restaurant.id==t){var i={orderIndex:r,order:n[r]};return console.log(i),i}}function createOrder(n,t){return new Order(n,t)}function Product(n,t,i,r){this.id=n;this.name=t;this.amount=1;this.portion=i;this.price=r}function createProduct(){var e=findDivByElement("user-restaurant-full_product"),f;let n=e.id,o=document.getElementById(n+"_id").getAttribute("value"),s=document.getElementById(n+"_name").innerHTML,i=n+"_select",r,u;f=document.getElementById(i);f!=null?(u=$(`#${i} option:selected`).attr("id"),r=$(`#${i} option:selected`).html()):(r=$(`#${n}_portion-0`).html(),u=n+"_portion-0");let h=u.replace("portion","price"),t=document.getElementById(h).innerHTML;t=t.substr(0,t.indexOf(" "));return new Product(o,s,r,t)}function getProduct(){}function addProductToOrderProducts(n,t){return t.push(n),t.length-1}function Restaurant(n,t,i,r){this.id=n;this.name=t;this.deliveryCost=i;this.minOrderPrice=r}function createRestaurant(){let n=getRestaurantId(),t=document.getElementById("h1_name").innerHTML,i=document.getElementById("span_delivery-cost").innerHTML,r=document.getElementById("span_minimal-order-price").innerHTML;return new Restaurant(n,t,i,r)}function getRestaurantId(){return document.getElementById("restaurant-id").getAttribute("value")}function addOrderView(n){var t=getCartMain();t.appendChild(createOrderView(n))}function addProductView(n,t){var i=getCartMain(),r=i.getElementsByClassName("order")[t],u=r.getElementsByClassName("order_products")[0];u.appendChild(createProductDiv(n))}function incrementProductView(n,t,i){var e=getCartMain(),o=e.getElementsByClassName("order")[i],s=o.getElementsByClassName("order_products")[0],u=s.getElementsByClassName("products_product")[t],h=u.getElementsByClassName("product_amount")[0],r;h.getElementsByTagName("span")[0].innerHTML++;r=u.getElementsByClassName("product-price")[0];console.log(r);let f=n.price*n.amount;console.log(f);r.innerHTML=`${f} BYN`}function getCartMain(){return $(`.cart-main`)[0]}function createOrderView(n){var t=createDivWithClass("order"),i=createOrderDivRestaurant(n.restaurant),r=createOrderDivProducts(n.products),u=createOrderDivDelivery(n.restaurant.deliveryCost);return t.appendChild(i),t.appendChild(r),t.appendChild(u),t}function createOrderDivRestaurant(n){var i=createDivWithClass("order_restaurant"),r=document.createElement("h4"),t;return r.innerHTML=n.name,t=document.createElement("input"),t.type="hidden",t.value=n.id,i.appendChild(r),i.appendChild(t),i}function createOrderDivProducts(n){var t=createDivWithClass("order_products"),i;for(let r=0;r<n.length;r++)i=createProductDiv(n[r]),t.appendChild(i);return t}function createOrderDivDelivery(n){var t=createDivWithClass("order_delivery"),r=document.createElement("h6"),i;return r.innerHTML="Delivery",i=document.createElement("span"),i.innerHTML=n+" BYN",t.appendChild(r),t.appendChild(i),t}function createProductDiv(n){var t=createDivWithClass("products_product"),s=document.createElement("h6"),i,r,o,u,f,e;return s.innerHTML=n.name,i=createDivWithClass("product_amount"),r=document.createElement("div"),r.classList.toggle("btn-change-amount"),r.innerHTML="-",o=document.createElement("span"),o.innerHTML=n.amount,u=document.createElement("div"),u.classList.toggle("btn-change-amount"),u.innerHTML="+",i.appendChild(r),i.appendChild(o),i.appendChild(u),f=document.createElement("span"),f.classList.toggle("product-portion"),f.innerHTML=n.portion,e=document.createElement("span"),e.classList.toggle("product-price"),e.innerHTML=`${n.price*n.amount} BYN`,t.appendChild(s),t.appendChild(i),t.appendChild(f),t.appendChild(e),t}